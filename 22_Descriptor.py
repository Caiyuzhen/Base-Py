# ğŸ”¥ğŸ”¥æè¿°ç¬¦(ç±»æ–¹æ³•ã€é™æ€æ–¹æ³•ã€property å‡½æ•°çš„åº•å±‚å®ç°)
# åªè¦æ˜¯å®ç°äº† __get__ã€__set__ã€__delete__ ä¸‰ä¸ªæ–¹æ³•ä¸­çš„ä»»æ„ä¸€ä¸ªæˆ–å¤šä¸ªæ–¹æ³•çš„ç±»ï¼Œè¿™ä¸ªç±»å°±å«åšæè¿°ç¬¦ï¼ï¼
# è·Ÿé­”æ³•æ–¹æ³•çš„å·®å¼‚æ˜¯, æè¿°ç¬¦æ˜¯ç±»çº§åˆ«çš„ï¼ˆç®¡åˆ«äººå®¶çš„å±æ€§ï¼‰, è€Œé­”æ³•æ–¹æ³•æ˜¯å®ä¾‹çº§åˆ«çš„ (ç®¡è‡ªå·±å®¶çš„å±æ€§)

class DD:
	def __get__(self, instance, owner): 
		print(f'self -> {self} \n instance -> {instance} \n owner -> {owner}')

	def __set__(self, instance, value): 
		print(f'self -> {self} \n instance -> {instance} \n value -> {value}')

	def __delete__(self, instance):
		print(f'self -> {self} \n instance -> {instance}')

class C: # ğŸŒŸ owner å¯¹åº”çš„æ˜¯, è¢«ã€æè¿°ç¬¦ã€‘ã€æ‹¦æˆªçš„å±æ€§ã€‘ã€æ‰€åœ¨çš„ç±»ã€‘
	x = DD() # ğŸŒŸself å¯¹åº”çš„æ˜¯ã€æè¿°ç¬¦çš„å®ä¾‹å¯¹è±¡ã€‘, ä¹Ÿå°±æ˜¯ x  ->  æŠŠ x å±æ€§å˜ä¸ºæè¿°ç¬¦
	#ä¸Šé¢æè¿°ç¬¦åªèƒ½ç”¨åœ¨ç±»å±æ€§ï¼ä¸èƒ½ç”¨åœ¨å®ä¾‹å±æ€§ï¼æ¯”å¦‚ def __init__(self): self.x = DD() ä¼šæŠ¥é”™!!

c = C() #ğŸŒŸ instance å¯¹åº”çš„æ˜¯, è¢«ã€æè¿°ç¬¦ã€‘ã€æ‹¦æˆªçš„å±æ€§ã€‘ã€æ‰€åœ¨çš„ç±»ã€‘çš„ã€å®ä¾‹å¯¹è±¡ã€‘, ä¹Ÿå°±æ˜¯ c
c.x = 250







# ğŸ”¥ğŸ”¥ğŸ”¥æ•°æ®æè¿°ç¬¦: å®ç°äº† __set__ æˆ– __delete__ å°±æ˜¯æ•°æ®æè¿°ç¬¦, åªå®ç° __get__ å°±æ˜¯éæ•°æ®æè¿°ç¬¦
# å®ä¾‹å±æ€§ä¼˜å…ˆçº§é«˜äºéæ•°æ®æè¿°ç¬¦, æ‰€ä»¥å®ä¾‹å±æ€§ä¼šè¦†ç›–æè¿°ç¬¦, ä½†æ˜¯æ•°æ®æè¿°ç¬¦çš„ä¼˜å…ˆçº§åˆé«˜äºå®ä¾‹å±æ€§, æ‰€ä»¥æ•°æ®æè¿°ç¬¦ä¸ä¼šè¢«å®ä¾‹å±æ€§æ‰€è¦†ç›–ï¼
print("\n ___è¿™æ˜¯ä¸€æ ¹åˆ†å‰²çº¿___ \n")


# ğŸ”¥ğŸ”¥é€šè¿‡æè¿°ç¬¦æ‹¦æˆªå®ä¾‹å±æ€§å, è¿›è¡Œè¿›ä¸€æ­¥çš„æ“ä½œ(ä¸å¤Ÿä¼˜é›…çš„å®ç°æ–¹å¼ï¼ï¼)
class PP:
	def __init__(self, name):
		self.name = name

	def __get__(self, instance, owner):
		print('get~aha~æˆåŠŸä»å¯¹è±¡ä¸­è¯»å–æ•°æ®')
		return instance.__dict__.get(self.name) # ğŸŒŸæŠŠå®ä¾‹å±æ€§çš„æ“ä½œäº¤ç»™äº† dict__get æ–¹æ³•

	def __set__(self, instance, value):
		print('set~aha~æˆåŠŸå†™å…¥æ•°æ®åˆ°å¯¹è±¡çš„å­—å…¸ä¸­')
		instance.__dict__[self.name] = value


class KK():
	L = PP('Zeno') # ğŸŒŸæŠŠ L èµ‹å€¼ç»™æè¿°ç¬¦, ä¸ä¼˜é›…çš„æ–¹å¼, å› ä¸ºè¦ä¼ å…¥ nameï¼ğŸ‘‡ä¸‹é¢é‚£ä¸ªæ–¹æ³•æ›´ä¼˜é›…ï¼
 
kk = KK()
kk.L

kk.L = 250






# ğŸ”¥ğŸ”¥ğŸ”¥é€šè¿‡æè¿°ç¬¦æ‹¦æˆªå®ä¾‹å±æ€§å, è¿›è¡Œè¿›ä¸€æ­¥çš„æ“ä½œ(æ›´åŠ ä¼˜é›…çš„å®ç°æ–¹å¼ï¼ï¼__set_name__ æ–¹æ³•)
class FG:
	def __set_name__(self, owner, name): #ğŸŒŸğŸŒŸ__set_name__ å°±ä¸ç”¨å†åœ¨ AA() å±æ€§ä¸­ä¼ å…¥ name äº†ï¼ï¼
		self.name = name

	def __get__(self, instance, owner):
		print('get~aha~æˆåŠŸä»å¯¹è±¡ä¸­è¯»å–æ•°æ®')
		return instance.__dict__.get(self.name) # ğŸŒŸæŠŠå®ä¾‹å±æ€§çš„æ“ä½œäº¤ç»™äº† dict__get æ–¹æ³•

	def __set__(self, instance, value):
		print('set~aha~æˆåŠŸå†™å…¥æ•°æ®åˆ°å¯¹è±¡çš„å­—å…¸ä¸­')
		instance.__dict__[self.name] = value


class AA():
	L = FG() # ğŸŒŸæŠŠ L èµ‹å€¼ç»™æè¿°ç¬¦
 
aa = AA()
aa.L

aa.L = 250






print("\n ___è¿™æ˜¯ä¸€æ ¹åˆ†å‰²çº¿___ \n")





# ğŸ”¥ğŸ”¥ğŸ”¥å‡½æ•°è£…é¥°å™¨, ç”¨äºæ‹¦æˆªç±»çš„å®ä¾‹åŒ–è¿‡ç¨‹, âš¡ï¸âš¡ï¸âš¡ï¸åœ¨ç±»å®ä¾‹åŒ–ä¹‹å‰è¿›è¡Œå¹²é¢„ï¼ï¼
def report(cls):
	def onCall(*args, **kwargs): #ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ç¬¬äºŒæ­¥, æ”¶é›†å‚æ•°, (1,2,3) è¢«æ‰“åŒ…æˆå…ƒç¥–, ä¼ å…¥ *args
		print('å¼€å§‹å®ä¾‹åŒ–å¯¹è±¡...') #ç¬¬ä¸‰æ­¥

		a = cls(*args, **kwargs) #ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ç¬¬å››æ­¥,  *args è¡¨ç¤ºæŠŠå…ƒç¥–è§£åŒ…æˆ (1,2,3), ä¼ å…¥ cls çš„æ„é€ å‡½æ•°

		print('å®ä¾‹åŒ–å¯¹è±¡æˆåŠŸï¼') #ç¬¬ä¸ƒæ­¥
		return a #ç¬¬å…«æ­¥, è¿”å›å®ä¾‹åŒ–å¯¹è±¡, èµ‹å€¼ç»™ä¸‹é¢çš„ final

	return onCall



@report #ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥è¯­æ³•ç³–, ç›¸å½“äº Res = report(Res)
class Res:
	def __init__(self, x, y, z): #ç¬¬äº”æ­¥, ä¼ å…¥ä¸‰ä¸ªå‚æ•°
		self.x = x
		self.y = y
		self.z = z
		print('æ„é€ å‡½æ•°è¢«åˆå§‹åŒ–è°ƒç”¨æˆåŠŸï¼') #ç¬¬å…­æ­¥

final = Res(1,2,3) #ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥è£…é¥°å™¨ä½¿ç„¶, ç›¸å½“äº onCall(1,2,3)!! ç¬¬ä¸€æ­¥ï¼Œä¼ å…¥å‚æ•°









#ğŸ”¥ğŸ”¥ğŸ”¥ç±»è£…é¥°å™¨
#æ¡ˆä¾‹: ä¸ç”¨ç±»è£…é¥°å™¨çš„å®ç°, åˆ©ç”¨ç±»çš„ __call__ æ–¹æ³•, å®ç°ä¸€ä¸ªç»Ÿè®¡è¢«è°ƒç”¨æ¬¡æ•°çš„ç±»
class Counter:
	def __init__(self):
		self.count = 0

	def __call__(self):
		self.count += 1
		print(f'è¿™æ˜¯ç¬¬ {self.count} æ¬¡è¢«è°ƒç”¨')


finalCount = Counter()
finalCount()
finalCount()



print("\n ___è¿™æ˜¯ä¸€æ ¹åˆ†å‰²çº¿___ \n")



#æ¡ˆä¾‹: æŠŠç±»å½“ä½œè£…é¥°å™¨, å–è£…é¥°å‡½æ•°, ç»Ÿè®¡å‡½æ•°è¢«è°ƒç”¨çš„æ¬¡æ•°
class Counter2:
	def __init__(self, func): #è·å–å‡½æ•° func
		self.count = 0
		self.func = func

	def __call__(self, *args, **kwargs): #âš¡ï¸âš¡ï¸æ”¶é›†å‚æ•°, æ‰“åŒ…æˆå…ƒç¥–, ä¼ å…¥ func
		self.count += 1
		print(f'è¿™æ˜¯ç¬¬ {self.count} æ¬¡è¢«è°ƒç”¨')
		return self.func(*args, **kwargs) #âš¡ï¸âš¡ï¸è°ƒç”¨å‡½æ•° func, ä¼ å…¥å…ƒç¥–å¹¶è§£åŒ…, æœ€ç»ˆè¿”å›ç»“æœ


@Counter2 #ğŸ”¥ğŸ”¥ğŸ‘‰ç›¸å½“äº sayCount = Counter2(sayCount) , ç›¸å½“äºè®© sayCount å˜æˆäº† Counter2 çš„å®ä¾‹åŒ–å¯¹è±¡ï¼ğŸ”¥ğŸ”¥ğŸ”¥ æ‰€ä»¥ sayCount() ç›¸å½“äº Counter2()!!!
def sayCount():
	print('hello world~')

sayCount() # ğŸŒŸğŸŒŸğŸ‘†è¿”å›çš„ sayCount() å·²ç» âš¡ï¸âš¡ï¸è¢«æ‰åŒ…æˆäº† ã€Counter2 çš„å®ä¾‹åŒ–å¯¹è±¡ã€‘ æ‰€ä»¥å¯ä»¥ç›´æ¥è°ƒç”¨ï¼
sayCount() #ğŸ”¥ğŸ”¥ğŸ‘†ç›¸å½“äºæŠŠ Counter2 å½“ä½œå‡½æ•°æ¥è°ƒç”¨ï¼Œæ‰€ä»¥ä¼šè§¦å‘ __call__ æ–¹æ³•!
